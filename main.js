(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a,l){var u=o.handleCardClick,c=i.addLike,s=a.deleteLike,f=l.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._userId=n,this._ownerId=e.owner._id,this._cardId=e._id,this._name=e.name,this._link=e.link,this._cardSelector=r,this._handleCardClick=u,this.likeCounter=e.likes.length,this.addLike=c,this.deleteLike=s,this.dataLikes=e.likes,this.handleDeleteClick=f}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this.elementImg=this._element.querySelector(".element__image"),this.elementImg.id=this._cardId,this.elementImg.src=this._link,this.elementImg.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._element.querySelector(".element__like-counter").textContent=this.likeCounter,this._ownerId!==this._userId&&this._element.querySelector(".element__button-delete").remove(),this._isLiked(this.dataLikes),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like").addEventListener("click",(function(t){e._element.querySelector(".element__like").classList.contains("element__like_active")?e.deleteLike(e._cardId):e.addLike(e._cardId)})),this._element.querySelector(".element__button-delete").addEventListener("click",(function(){e.handleDeleteClick(e.elementImg.id,e._element)})),this._element.querySelector(".element__image").addEventListener("click",(function(t){e._handleCardClick(t)}))}},{key:"hideLike",value:function(e){this._element.querySelector(".element__like-counter").textContent=e.likes.length,this._element.querySelector(".element__like").classList.toggle("element__like_active")}},{key:"showLike",value:function(e){this._element.querySelector(".element__like-counter").textContent=e.likes.length,this._element.querySelector(".element__like").classList.toggle("element__like_active")}},{key:"_isLiked",value:function(e){var t=this;e.forEach((function(e){e._id===t._userId&&t._element.querySelector(".element__like").classList.add("element__like_active")}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_hasInvalidInput",(function(){return o._inputList.some((function(e){return!e.validity.valid}))})),r(this,"addBtnDisables",(function(){o._buttonElement.classList.add(o._inactiveButtonClass),o._buttonElement.setAttribute("disabled",!0)})),r(this,"_removeBtnDisabled",(function(){o._buttonElement.classList.remove(o._inactiveButtonClass),o._buttonElement.removeAttribute("disabled")})),r(this,"isValid",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e)})),r(this,"_showInputError",(function(e){var t=o._validateElement.querySelector(".".concat(e.id,"-input-error"));e.classList.add(o._inputErrorClass),t.classList.add(o._errorClass),t.textContent=e.validationMessage})),r(this,"_hideInputError",(function(e){var t=o._validateElement.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(o._inputErrorClass),t.classList.remove(o._errorClass),t.textContent=""})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._validateElement=n,this._inputList=Array.from(this._validateElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._validateElement.querySelector(this._submitButtonSelector)}var t,o;return t=e,(o=[{key:"enableValidation",value:function(){this._validateElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e.isValid(t),e.toggleButtonState()}))}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this.addBtnDisables(this._buttonElement):this._removeBtnDisabled(this._buttonElement)}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&n(t.prototype,o),e}(),i=document.querySelector("#name"),a=document.querySelector("#job"),l=document.querySelector(".profile__button-add"),u=document.querySelector(".profile__button"),c=document.querySelector(".profile__image-btn"),s=document.querySelector(".form__button"),f=document.querySelector("#newCardSubmitBtn"),h=document.querySelector("#avatar__btn"),p={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"};function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&_(t.prototype,n),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popupSelector=t,this._element=document.querySelector(this._popupSelector)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__button-close").addEventListener("click",(function(){e.close()})),this._element.addEventListener("mousedown",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&m(t.prototype,n),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n,r=t.formSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._formSubmit=r,n._form=n._element.querySelector(".form"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputValues=this._form.querySelectorAll(".form__input"),this._inputValues.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;g(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmit(e._getInputValues())}))}},{key:"close",value:function(){g(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&b(t.prototype,n),a}(y);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imagePopupTitle=t._element.querySelector(".popup__title"),t._imagePopupImg=t._element.querySelector(".popup__img"),t}return t=a,(n=[{key:"open",value:function(e,t){this._imagePopupTitle.textContent=e,this._imagePopupImg.src=t,this._imagePopupImg.alt=e,O(R(a.prototype),"open",this).call(this)}}])&&L(t.prototype,n),a}(y);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._URL=n,this._token=r.authorization}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._URL,"cards"),{headers:{authorization:this._token}}).then(this._handleResponse)}},{key:"getUserInfoFromServer",value:function(){return fetch("".concat(this._URL,"users/me"),{headers:{authorization:this._token}}).then(this._handleResponse)}},{key:"setUserInfoFromServer",value:function(e){return fetch("".concat(this._URL,"users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.job})}).then(this._handleResponse)}},{key:"addCardToServer",value:function(e){return fetch("".concat(this._URL,"cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}},{key:"deleteCardFromServer",value:function(e){return fetch("".concat(this._URL,"cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._URL,"cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._URL,"cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._URL,"users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.link})}).then(this._handleResponse)}},{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&q(t.prototype,n),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._info=t.job,this._avatar=t.avatar,this._profileName=document.querySelector(this._name),this._profileJob=document.querySelector(this._info),this._profileAvatar=document.querySelector(this._avatar)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){this._itemId=e._id,this._profileName.textContent=e.name,this._profileJob.textContent=e.about,this._profileAvatar.src=e.avatar}},{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,job:this._profileJob.textContent,avatar:this._profileAvatar.src,userId:this._itemId}}}])&&B(t.prototype,n),e}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function a(e,t){var n,r=t.submit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submit=r,n._form=n._element.querySelector(".form"),n}return t=a,(n=[{key:"open",value:function(e,t){D(N(a.prototype),"open",this).call(this),this.id=e,this.elem=t}},{key:"setEventListeners",value:function(){var e=this;D(N(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e.id,e.elem)}))}}])&&A(t.prototype,n),a}(y);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=new x({name:".profile__name",job:".profile__job",avatar:".profile__image"}),M=new T({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"4e299d77-1777-4738-8eea-94761855c603","Content-Type":"application/json"}}),$=M.getUserInfoFromServer(),G=M.getInitialCards();Promise.all([$,G]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];H.setUserInfo(o),Q.renderItems(i.reverse())})).catch((function(e){console.log(e)}));var K=new P(".popup_type_image");K.setEventListeners();var Q=new d({renderer:function(e){W(e)}},".elements__list"),W=function(e){var n=function(e){var n=H.getUserInfo().userId,r=new t(e,n,".element_template",{handleCardClick:function(e){K.open(e.target.alt,e.target.src)}},{addLike:function(e){M.addLike(e).then((function(e){e&&r.showLike(e)})).catch((function(e){console.log(e)}))}},{deleteLike:function(e){M.deleteLike(e).then((function(e){e&&r.hideLike(e)})).catch((function(e){console.log(e)}))}},{handleDeleteClick:function(e,t){ee.open(e,t)}});return r.generateCard()}(e);Q.addItem(n)},X=new w(".popup_type_new-card",{formSubmit:function(e){f.textContent="Сохранить...",M.addCardToServer(e).then((function(e){W(e),X.close(),ne.addBtnDisables()})).catch((function(e){console.log(e)})).finally((function(){f.textContent="Сохранить"}))}});X.setEventListeners();var Y=new w(".popup_type_edit",{formSubmit:function(e){s.textContent="Сохранить...",M.setUserInfoFromServer(e).then((function(e){H.setUserInfo(e),Y.close()})).catch((function(e){console.log(e)})).finally((function(){s.textContent="Сохранить"}))}});Y.setEventListeners();var Z=new w(".popup_type_avatar",{formSubmit:function(e){h.textContent="Сохранить...",M.changeAvatar(e).then((function(e){H.setUserInfo(e),Z.close()})).catch((function(e){console.log(e)})).finally((function(){h.textContent="Сохранить"}))}});Z.setEventListeners();var ee=new F(".popup_type_confirmation",{submit:function(e,t){M.deleteCardFromServer(e).then((function(e){e&&(t.remove(),ee.close())})).catch((function(e){console.log(e)}))}});ee.setEventListeners(),l.addEventListener("click",(function(){ne.resetValidation(),X.open()})),c.addEventListener("click",(function(){re.resetValidation(),Z.open()})),u.addEventListener("click",(function(){te.resetValidation(),Y.open();var e=H.getUserInfo();i.value=e.name,a.value=e.job}));var te=new o(p,document.querySelector('form[name="edit-profile"]')),ne=new o(p,document.querySelector('form[name="new-card"]')),re=new o(p,document.querySelector('form[name="change-avatar"]'));te.enableValidation(),ne.enableValidation(),re.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbnN0YW50cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInVzZXJJZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJ0aGlzIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZElkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJsaWtlQ291bnRlciIsImxpa2VzIiwibGVuZ3RoIiwiZGF0YUxpa2VzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZWxlbWVudEltZyIsImlkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJfaXNMaWtlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImVsZW0iLCJ0b2dnbGUiLCJmb3JFYWNoIiwibGlrZSIsImFkZCIsIkZvcm1WYWxpZGF0b3IiLCJwcm9wcyIsInZhbGlkYXRlRWxlbWVudCIsIl9pbnB1dExpc3QiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJfdmFsaWRhdGVFbGVtZW50IiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsInByZXZlbnREZWZhdWx0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpc1ZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImFkZEJ0bkRpc2FibGVzIiwiX3JlbW92ZUJ0bkRpc2FibGVkIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhZGRJbWFnZUJ0biIsImVkaXRQcm9maWxlQnRuIiwicHJvZmlsZUltZ0J0biIsImZvcm1CdG4iLCJuZXdDYXJkQnRuIiwiYXZhdGFyQnRuIiwiZm9ybVNlbGVjdG9yIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cFNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdCIsIl9mb3JtU3VibWl0IiwiX2Zvcm0iLCJuZXdJbmZvIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VQb3B1cFRpdGxlIiwiX2ltYWdlUG9wdXBJbWciLCJ0aXRsZSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX1VSTCIsIl90b2tlbiIsImF1dGhvcml6YXRpb24iLCJmZXRjaCIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0Iiwiam9iIiwiYXZhdGFyIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIlVzZXJJbmZvIiwiX2luZm8iLCJfYXZhdGFyIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfcHJvZmlsZUF2YXRhciIsIl9pdGVtSWQiLCJQb3B1cFdpdGhTdWJtaXQiLCJzdWJtaXQiLCJfc3VibWl0IiwidXNlckluZm8iLCJhcGkiLCJnZXRVc2VySW5mb1Byb21pc2UiLCJnZXRVc2VySW5mb0Zyb21TZXJ2ZXIiLCJnZXRJbml0aWFsQ2FyZHNQcm9taXNlIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWxsIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZHMiLCJzZXRVc2VySW5mbyIsImNhcmRMaXN0IiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBXaXRoSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsImFkZEluQXJyYXkiLCJjYXJkIiwiY3VycmVudElkIiwiZ2V0VXNlckluZm8iLCJvcGVuIiwicmVzdWx0Iiwic2hvd0xpa2UiLCJoaWRlTGlrZSIsImNvbmZpcm1hdGlvblBvcHVwIiwiZ2VuZXJhdGVDYXJkIiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJhZGRDYXJkUG9wdXAiLCJhZGRDYXJkVG9TZXJ2ZXIiLCJuZXdDYXJkRm9ybSIsImZpbmFsbHkiLCJlZGl0UHJvZmlsZVBvcHVwIiwic2V0VXNlckluZm9Gcm9tU2VydmVyIiwiYXZhdGFyUG9wdXAiLCJjaGFuZ2VBdmF0YXIiLCJjYXJkSWQiLCJkZWxldGVDYXJkRnJvbVNlcnZlciIsInJlc2V0VmFsaWRhdGlvbiIsImF2YXRhckZvcm0iLCJlZGl0Rm9ybSIsIm5ld1VzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6IjZMQUFxQkEsRSxXQUNqQixXQUFZQyxFQUFNQyxFQUFRQyxFQUExQixTQUVpQyxJQURwQkMsRUFDb0IsRUFEcEJBLGdCQUFtQkMsRUFDQyxFQUREQSxRQUFXQyxFQUNWLEVBRFVBLFdBQzlCQyxFQUFvQixFQUFwQkEsbUIsNEZBQW9CLFNBQzdCQyxLQUFLQyxRQUFVUCxFQUNmTSxLQUFLRSxTQUFXVCxFQUFLVSxNQUFNQyxJQUMzQkosS0FBS0ssUUFBVVosRUFBS1csSUFDcEJKLEtBQUtNLE1BQVFiLEVBQUtjLEtBQ2xCUCxLQUFLUSxNQUFRZixFQUFLZ0IsS0FDbEJULEtBQUtVLGNBQWdCZixFQUNyQkssS0FBS1csaUJBQW1CZixFQUN4QkksS0FBS1ksWUFBY25CLEVBQUtvQixNQUFNQyxPQUM5QmQsS0FBS0gsUUFBVUEsRUFDZkcsS0FBS0YsV0FBYUEsRUFDbEJFLEtBQUtlLFVBQVl0QixFQUFLb0IsTUFDdEJiLEtBQUtELGtCQUFvQkEsRSxpREFHN0IsV0FDSSxPQUFPaUIsU0FDRkMsY0FBY2pCLEtBQUtVLGVBQ25CUSxRQUNBRCxjQUFjLFlBQ2RFLFdBQVUsSywwQkFHbkIsV0Fh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LGNBQXdCLGtCQUtwQ3VHLEVBQVluQixvQkFFWixJQUFNUyxHQUFvQixJQUFJOUIsRUFBZ0IsMkJBQTRCLENBQ3RFQyxPQUFRLFNBQUN5QyxFQUFReEosR0FDYmtILEVBQUl1QyxxQkFBcUJELEdBQVFoRSxNQUFLLFNBQUNpRCxHQUMvQkEsSUFDQXpJLEVBQUtOLFNBQ0xrSixHQUFrQi9FLFlBR3JCaUUsT0FBTSxTQUFDQyxHQUNKQyxRQUFRQyxJQUFJRixTQUs1QmEsR0FBa0JULG9CQUVsQnpGLEVBQVk5QyxpQkFBaUIsU0FBUyxXQUNsQ3NKLEdBQVlRLGtCQUNaVixFQUFhUixVQUlqQjVGLEVBQWNoRCxpQkFBaUIsU0FBUyxXQUNwQytKLEdBQVdELGtCQUNYSixFQUFZZCxVQUdoQjdGLEVBQWUvQyxpQkFBaUIsU0FBUyxXQUNyQ2dLLEdBQVNGLGtCQUNUTixFQUFpQlosT0FDakIsSUFBTXFCLEVBQWM1QyxFQUFTc0IsY0FDN0IvRixRQUFrQnFILEVBQVl4TCxLQUM5Qm9FLFFBQWlCb0gsRUFBWTlELE9BR2pDLElBQU02RCxHQUFXLElBQUl2SixFQUFjQyxFQUFPeEIsU0FBU0MsY0FBYyw4QkFDM0RtSyxHQUFjLElBQUk3SSxFQUFjQyxFQUFPeEIsU0FBU0MsY0FBYywwQkFDOUQ0SyxHQUFhLElBQUl0SixFQUFjQyxFQUFPeEIsU0FBU0MsY0FBYywrQkFFbkU2SyxHQUFTRSxtQkFDVFosR0FBWVksbUJBQ1pILEdBQVdHLG9CIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCB1c2VySWQsIGNhcmRTZWxlY3RvcixcbiAgICAgICAgICAgICAgICB7aGFuZGxlQ2FyZENsaWNrfSwge2FkZExpa2V9LCB7ZGVsZXRlTGlrZX0sXG4gICAgICAgICAgICAgICAge2hhbmRsZURlbGV0ZUNsaWNrfSkge1xuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLmxpa2VDb3VudGVyID0gZGF0YS5saWtlcy5sZW5ndGhcbiAgICAgICAgdGhpcy5hZGRMaWtlID0gYWRkTGlrZTtcbiAgICAgICAgdGhpcy5kZWxldGVMaWtlID0gZGVsZXRlTGlrZTtcbiAgICAgICAgdGhpcy5kYXRhTGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgICAgICAgIC5jb250ZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLmVsZW1lbnRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgICAgICB0aGlzLmVsZW1lbnRJbWcuaWQgPSB0aGlzLl9jYXJkSWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudEltZy5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICB0aGlzLmVsZW1lbnRJbWcuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5saWtlQ291bnRlcjtcbiAgICAgICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uLWRlbGV0ZScpLnJlbW92ZSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXNMaWtlZCh0aGlzLmRhdGFMaWtlcylcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpLmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fbGlrZV9hY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlTGlrZSh0aGlzLl9jYXJkSWQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGlrZSh0aGlzLl9jYXJkSWQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrKHRoaXMuZWxlbWVudEltZy5pZCwgdGhpcy5fZWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIGhpZGVMaWtlKGVsZW0pIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSBlbGVtLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XG4gICAgfTtcblxuICAgIHNob3dMaWtlKGVsZW0pIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSBlbGVtLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XG4gICAgfTtcblxuICAgIF9pc0xpa2VkKGxpa2VzKSB7XG4gICAgICAgIGxpa2VzLmZvckVhY2gobGlrZSA9PiB7XG4gICAgICAgICAgICBpZiAobGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbn07XG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIHZhbGlkYXRlRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gcHJvcHMuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBwcm9wcy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHByb3BzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHByb3BzLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHByb3BzLmVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRWxlbWVudCA9IHZhbGlkYXRlRWxlbWVudDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl92YWxpZGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl92YWxpZGF0ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9O1xuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQnRuRGlzYWJsZXModGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVCdG5EaXNhYmxlZCh0aGlzLl9idXR0b25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIGFkZEJ0bkRpc2FibGVzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgfVxuXG4gICAgX3JlbW92ZUJ0bkRpc2FibGVkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cblxuICAgIGlzVmFsaWQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX3ZhbGlkYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWlucHV0LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgfTtcblxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fdmFsaWRhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXG4gICAgICAgIH0pO1xuICAgIH1cblxufVxuXG5cblxuXG5cblxuXG4iLCJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pvYicpO1xuZXhwb3J0IGNvbnN0IGFkZEltYWdlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1hZGQnKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1nQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlLWJ0bicpO1xuZXhwb3J0IGNvbnN0IGZvcm1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgbmV3Q2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdDYXJkU3VibWl0QnRuJyk7XG5leHBvcnQgY29uc3QgYXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhcl9fYnRuJyk7XG5cblxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzTGlzdCA9IFwiLmVsZW1lbnRzX19saXN0XCI7XG5cbmV4cG9ydCBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxuICAgIGpvYjogJy5wcm9maWxlX19qb2InLFxuICAgIGF2YXRhcjonLnByb2ZpbGVfX2ltYWdlJ1xufTtcblxuZXhwb3J0IGNvbnN0IHByb3BzID0ge1xuICAgIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19idXR0b25fZGlzYWJsZWQnLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59O1xuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICAgIH07XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH07XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKVxuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufTtcblxuXG5cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHtmb3JtU3VibWl0fSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IG5ld0luZm8gPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xuICAgICAgICB0aGlzLl9pbnB1dFZhbHVlcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgbmV3SW5mb1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gbmV3SW5mbztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXBUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZScpO1xuICAgICAgICB0aGlzLl9pbWFnZVBvcHVwSW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpO1xuICAgIH1cblxuICAgIG9wZW4odGl0bGUsIHNyYykge1xuICAgICAgICB0aGlzLl9pbWFnZVBvcHVwVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cEltZy5zcmMgPSBzcmM7XG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXBJbWcuYWx0ID0gdGl0bGU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KSB7XG4gICAgICAgIHRoaXMuX1VSTCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX3Rva2VuID0gaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICAgIH07XG5cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9VUkx9Y2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gICAgfTtcblxuICAgIGdldFVzZXJJbmZvRnJvbVNlcnZlcigpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX1VSTH11c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgICB9O1xuXG4gICAgc2V0VXNlckluZm9Gcm9tU2VydmVyKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX1VSTH11c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBhYm91dDogZGF0YS5qb2JcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gICAgfTtcblxuICAgIGFkZENhcmRUb1NlcnZlcihpdGVtKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9VUkx9Y2FyZHNgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rOiBpdGVtLmxpbmtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gICAgfTtcblxuICAgIGRlbGV0ZUNhcmRGcm9tU2VydmVyKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX1VSTH1jYXJkcy8ke2RhdGF9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gICAgfTtcblxuICAgIGFkZExpa2UoZGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fVVJMfWNhcmRzL2xpa2VzLyR7ZGF0YX1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgICB9O1xuXG4gICAgZGVsZXRlTGlrZShkYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9VUkx9Y2FyZHMvbGlrZXMvJHtkYXRhfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICAgIH07XG5cbiAgICBjaGFuZ2VBdmF0YXIoaXRlbSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fVVJMfXVzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGF2YXRhcjogaXRlbS5saW5rLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgICB9O1xuXG4gICAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH07XG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2luZm8gPSBkYXRhLmpvYjtcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZGF0YS5hdmF0YXI7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mbyk7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2F2YXRhcik7XG4gICAgfTtcblxuICAgIHNldFVzZXJJbmZvKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5faXRlbUlkID0gaXRlbS5faWRcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBpdGVtLmFib3V0O1xuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGl0ZW0uYXZhdGFyO1xuICAgIH07XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyxcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy5faXRlbUlkXG4gICAgICAgIH07XG4gICAgfTtcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7c3VibWl0fSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXQ7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgfTtcblxuICAgIG9wZW4oaWQsIGVsZW0pIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZWxlbSA9IGVsZW07XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXQodGhpcy5pZCwgdGhpcy5lbGVtKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHtcbiAgICBhZGRJbWFnZUJ0biwgYXZhdGFyQnRuLFxuICAgIGVkaXRQcm9maWxlQnRuLFxuICAgIGVsZW1lbnRzTGlzdCwgZm9ybUJ0bixcbiAgICBqb2JJbnB1dCxcbiAgICBuYW1lSW5wdXQsIG5ld0NhcmRCdG4sXG4gICAgcHJvZmlsZUltZ0J0biwgcHJvcHMsXG4gICAgdXNlckRhdGFcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXRcIjtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlckRhdGEpO1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjYvJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246ICc0ZTI5OWQ3Ny0xNzc3LTQ3MzgtOGVlYS05NDc2MTg1NWM2MDMnLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxufSk7XG5cbmNvbnN0IGdldFVzZXJJbmZvUHJvbWlzZSA9IGFwaS5nZXRVc2VySW5mb0Zyb21TZXJ2ZXIoKTtcblxuY29uc3QgZ2V0SW5pdGlhbENhcmRzUHJvbWlzZSA9IGFwaS5nZXRJbml0aWFsQ2FyZHMoKTtcblxuUHJvbWlzZS5hbGwoW2dldFVzZXJJbmZvUHJvbWlzZSwgZ2V0SW5pdGlhbENhcmRzUHJvbWlzZV0pXG4gICAgLnRoZW4oKFt1c2VyRGF0YSwgaW5pdGlhbENhcmRzXSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzLnJldmVyc2UoKSk7XG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG59KTtcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBjb25zdCBjdXJyZW50SWQgPSB1c2VySW5mby5nZXRVc2VySW5mbygpLnVzZXJJZDtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgY3VycmVudElkLCAnLmVsZW1lbnRfdGVtcGxhdGUnLCB7XG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChldnQpID0+IHtcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGV2dC50YXJnZXQuYWx0LCBldnQudGFyZ2V0LnNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFkZExpa2U6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBpLmFkZExpa2UoaXRlbSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuc2hvd0xpa2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgZGVsZXRlTGlrZTogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBhcGkuZGVsZXRlTGlrZShpdGVtKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5oaWRlTGlrZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGlkLCBlbGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uZmlybWF0aW9uUG9wdXAub3BlbihpZCwgZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgYWRkSW5BcnJheShpdGVtKVxuICAgIH1cblxufSwgZWxlbWVudHNMaXN0KTtcblxuY29uc3QgYWRkSW5BcnJheSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSlcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xufTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX25ldy1jYXJkJywge1xuICAgIGZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgICAgIG5ld0NhcmRCdG4udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMLi4uJ1xuICAgICAgICBhcGkuYWRkQ2FyZFRvU2VydmVyKGl0ZW0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgYWRkSW5BcnJheShyZXN1bHQpXG4gICAgICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIG5ld0NhcmRGb3JtLmFkZEJ0bkRpc2FibGVzKCk7XG5cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgbmV3Q2FyZEJ0bi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0Jywge1xuICAgIGZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgICAgIGZvcm1CdG4udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMLi4uJ1xuICAgICAgICBhcGkuc2V0VXNlckluZm9Gcm9tU2VydmVyKGl0ZW0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbiAgICAgICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgZm9ybUJ0bi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhcicsIHtcbiAgICBmb3JtU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgICAgICBhdmF0YXJCdG4udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMLi4uJ1xuICAgICAgICBhcGkuY2hhbmdlQXZhdGFyKGl0ZW0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbiAgICAgICAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIGF2YXRhckJ0bi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjb25maXJtYXRpb25Qb3B1cCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJy5wb3B1cF90eXBlX2NvbmZpcm1hdGlvbicsIHtcbiAgICBzdWJtaXQ6IChjYXJkSWQsIGVsZW0pID0+IHtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmRGcm9tU2VydmVyKGNhcmRJZCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25Qb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbmNvbmZpcm1hdGlvblBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEltYWdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG5ld0NhcmRGb3JtLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuXG5wcm9maWxlSW1nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGF2YXRhckZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgYXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGVkaXRGb3JtLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xuICAgIGNvbnN0IG5ld1VzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBuZXdVc2VySW5mby5uYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gbmV3VXNlckluZm8uam9iO1xufSk7XG5cbmNvbnN0IGVkaXRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IocHJvcHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bbmFtZT1cImVkaXQtcHJvZmlsZVwiXScpKTtcbmNvbnN0IG5ld0NhcmRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IocHJvcHMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bbmFtZT1cIm5ldy1jYXJkXCJdJykpO1xuY29uc3QgYXZhdGFyRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKHByb3BzLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtW25hbWU9XCJjaGFuZ2UtYXZhdGFyXCJdJykpO1xuXG5lZGl0Rm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG5uZXdDYXJkRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG5hdmF0YXJGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG5cblxuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=